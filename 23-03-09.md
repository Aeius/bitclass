# properties 파일 사용하여 JDBC
``` xml
<!-- JDBC -->
<bean 
  class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
  p:location="classpath:info.properties"/>
<bean 
  id="dataSource"
  class="org.springframework.jdbc.datasource.SimpleDriverDataSource"
  p:driverClass="com.mysql.cj.jdbc.Driver"
  p:url="${db.url}" p:username="${db.user}" p:password="${db.password}"/>
```
``` properties
db.url=jdbc:mysql://192.168.99.000:3306/lecture
db.user=scott
db.password=tiger
```
# Junit
### 앞서 junit테스트를 사용할 때 @before를 이용해서 어떤 xml을 읽어들일지에 대한 선택을 어노테이션으로 할 수 있다. 배열로 여러개 선택도 가능   
```java
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:/applicationContext.xml")
//@ContextConfiguration("file:src/main/webapp/WEB-INF/spring/root-context.xml")
//@ContextConfiguration({
//		"classpath:/applicationContext.xml",
//		"file:src/main/webapp/WEB-INF/spring/root-context.xml"
//		})
public class ApplicationTest {
	@Autowired
	DataSource dataSource;
  
	@Test
	public void test() {
		assertNotNull(dataSource);
	}
}
```
# mybatis
## Spring version 3.X 최종버전 부터 안정적으로 사용가능하다 오류가 발생되었을 때 버전을 확인해보자!
![image](https://user-images.githubusercontent.com/87006912/223897042-e6635bb1-c7fd-49a8-aafc-c882854d34e6.png)   
### mybatis-context.xml 파일 생성 후 스키마 복붙 및 기본 세팅
``` xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
  <mappers>
    <mapper resource="mapper/dept-mapper.xml"/>
  </mappers>
</configuration>
```
### mapper/dept-mapper.xml 만든 후 스키마 복붙 !위와 스키마가 다름
``` xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper>

</mapper>
```
### applicationContext.xml
``` xml
<!-- Mybatis -->
<bean 
  id="sqlSessionFactory"
  class="org.mybatis.spring.SqlSessionFactoryBean"
  p:configLocation="classpath:/mybatis-config.xml"
  p:dataSource-ref="dataSource"/>

<bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate">
  <constructor-arg ref="sqlSessionFactory"></constructor-arg>
</bean>
```
### DeptVO, DeptDao(interface) 까지만 정의 후 dept-mapper.xml 추가 작성
``` xml
<mapper namespace="com.bit.sts07.model.DeptDao">
	<select id="findAll" resultType="com.bit.sts07.model.entity.DeptVo">
		select * from dept
	</select>
</mapper>
```
### Test
원래 namespace 작성이 필수가 아니었는데 이번에 ORM되도록 업데이트 되면서 namespace가 필수가 되었다.   
DaoImpl을 작성하지 않았음에도 불구하고 DeptDao interface를 이용해서 select를 할 수 있게 된 결과값을 볼 수 있다.   
``` java
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:/applicationContext.xml")
public class DeptDaoTest {
	@Autowired
	SqlSession sqlSession;
	
	@Test
	public void findAllTest() {
//		for(DeptVo bean : sqlSession.getMapper(DeptDao.class).findAll()) {
//			System.out.println(bean);
//		}
		assertNotNull(sqlSession.getMapper(DeptDao.class).findAll());
	}
}
```








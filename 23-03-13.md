# Node.js
V8 runtime 엔진 사용   
라이프사이클이 매우 짧기 때문에 의존성에 맞춰서 사용해야하기 때문에 업데이트를 막해서는 안된다.    
## NVM (node version manager)을 이용한 설치
[NVM 다운로드](https://github.com/coreybutler/nvm-windows/releases/download/1.1.10/nvm-setup.exe)   
node는 하위종속성 때문에 버전관리를 잘해야하는데 NVM을 이용해서 버전을 관리할 수 있도록 해주는 툴이다.
#### 버전 체크, 도움말
``` bash
nvm --version => nvm -v
nvm --help => nvm -h
```
#### node.js 다운로드
``` bash
nvm install 18.15.0
```
#### 다운받은 node 버전 확인, node 버전 변경, node 버전 확인
``` bash
nvm list => node ls
nvm use 18.15.0
node -v
```
#### 실행
``` bash
node
```
![image](https://user-images.githubusercontent.com/87006912/224584459-c3714413-2f24-4dd7-b951-1029569e118c.png)    
이후 자바스크립트 코드를 그대로 사용할 수 있다.   
![image](https://user-images.githubusercontent.com/87006912/224584651-411946e9-19dd-4414-bf3e-92cc383d7567.png)   
#### 종료
``` node
process.exit();
또는 ctrl+c 두번
```
![image](https://user-images.githubusercontent.com/87006912/224584598-f9b13c2b-f078-4e0b-b8b3-e53631562df2.png)   
#### js파일 실행
``` bash
node ex01.js
```
![image](https://user-images.githubusercontent.com/87006912/224584788-e4e17e52-b6dc-4c2d-a725-e1765cc4891e.png)   

### getting started
js 파일 생성 후 실행시키면 서버 생성됨    
``` js
const http = require('http');

const hostname = '127.0.0.1';
const port = 3000;

const server = http.createServer((req, res) => {
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end('Hello World');
});

server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`);
});
```
``` bash
node ex02.js
```
![image](https://user-images.githubusercontent.com/87006912/224585395-983456ba-4c32-400f-bf03-d53abc49cfd4.png)   
localhost:3000으로 접근하면 Hello World 확인 가능함   
![image](https://user-images.githubusercontent.com/87006912/224585423-401167f6-0f84-4b07-a085-e9437b820d68.png)   

## 최상위 객체 Global (기존 js에서 Window에 해당)
**변수**
``` js
console.log(__dirname);
console.log(__filename);
```
![image](https://user-images.githubusercontent.com/87006912/224587354-8d4cbe31-5153-43b7-93c5-66c02c28ba42.png)   
#### console 객체 - 콘솔 화면 관련 기능 수행   
**메서드**  
``` bash
error 에러 출력 (x) 표시
warn 경고 출력 (!) 표시
debug 디버깅 관련 정보
log 로그 출력
info 정보 출력
assert 검증(Assertion)
time(tag) 시간 측정 시작
timeEnd(label) 시간 측정 종료
```
*formatting*   
``` js
console.log('%d <-- number', 1234);
console.log('%d <-- number', 3.14);
console.log('%s <-- string', "abcd");
console.log('%j <-- json', {key1:'val1'});
%% % 문자 자체   
```   
![image](https://user-images.githubusercontent.com/87006912/224587868-58de5c26-550d-4dcd-948e-39957004ecef.png)   

#### process 객체 - 프로그램과 프로세스 관련 기능 수행   
``` js
console.log(process.argv, '실행 매개 변수');
console.log(process.env, '실행환경 관련 정보');
console.log(process.version, 'Node의 버전');
console.log(process.versions, '종속된 프래그램 버전');
console.log(process.arch, '프로세서의 아키텍쳐 표시');
console.log(process.platform, '플랫폼 정보 표시');

console.log(process.env.MYSQL_USER);
console.log(process.env.MYSQL_PW);
```
**메서드**
``` bash
exit 프로그램 종료
memoryUsage 메모리 사용 정보 객체 반환
uptime 현재 프로그램이 실행된 시간
```
#### exports 모듈과 관련된 기능 수행 (CommonJS)   
**방법 1**   
``` js
-------------- module01.js
var func1 = function () {
    console.log('func1 run...');
};
exports.func1 = func1;
exports.su1 = 1234;
-------------- ex06.js
var f = require('./module01');
f.func1();
console.log(f.su1);
```
![image](https://user-images.githubusercontent.com/87006912/224589343-6c58a858-b946-4296-a264-1095217ff2f3.png)   
**방법 2**   
``` js
--------------- module02.js
var obj = {
    su2: 4321,
    func2: function() {
        console.log('func2 run...')
    }
};
module.exports = obj;
--------------- ex07.js
var o = require('./module02');
o.func2();
console.log(o.su2);
```
![image](https://user-images.githubusercontent.com/87006912/224589644-ec3df769-a621-4b49-b776-a24729bb9876.png)    
## Node.js에서 자체적으로 제공하는 모듈
호출은 필수   
```
var os = require('os');
```
### Os mudule
```
메서드
hostname 운영체제의 호스트명을 반환
type 운영체제의 이름을 반환
platform 운영체제의 플랫폼을 반환
arch 운영체제 아키텍처 반환
release 운영체제의 버전을 반환
uptime 운영체제 실행된 시간을 반환
loadavg 로드 평균값 정보 반환 (Array)
totalmem 운영체제 총 메모리 사이즈 반환
freemem 시스템 사용 가능한 메모리 반환
cpus CPU 정보 반환 (Array)
getNerworkInterfaces 네트워크 인터페이스 정보 반환 (Array)
```
더 자세한 내용은 [Document 문서 참조 - OS Module](https://nodejs.org/dist/latest-v18.x/docs/api/os.html)   

### Url module
```
parse URL 문자열을 URL 객체로 변환
format URL 객체를 URL 문자열로 변환
resolve 매개변수를 조합, URL 문자열을 생성하여 반환
```
``` js
var url = require('url')
var msg = "https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=node"

console.log(url.parse(msg).protocol)
console.log(url.parse(msg).host)
console.log(url.parse(msg).port)
console.log(url.parse(msg).path)
console.log(url.parse(msg).query)
console.log(url.parse(msg).auth)
console.log(url.parse(msg).href)

// query String object 반환
console.log(url.parse(msg, true).query)
```
![image](https://user-images.githubusercontent.com/87006912/224592866-568451c7-8d79-4293-9dd3-2c4b006fe981.png)   
![image](https://user-images.githubusercontent.com/87006912/224592983-450b9dec-9b9a-43ad-a75b-da18043d76fa.png)   
``` js
console.log(url.format(url.parse(msg)));
console.log('-------------');
console.log(url.resolve('https://m.naver.com', 'dept'));
```
![image](https://user-images.githubusercontent.com/87006912/224593390-b17edf60-dc2d-45c3-8c5e-c840abbf2b6e.png)   

### Query String module
```
parse 쿼리 문자열을 쿼리 객체로 변환
stringify 쿼리 객체를 쿼리 문자열로 변환
```
``` js
var query = require('querystring');
var msg = 'where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=node';
console.log(query.parse(msg));
console.log(query.stringify(query.parse(msg)));
```
![image](https://user-images.githubusercontent.com/87006912/224594166-260006b2-cef6-4954-82ed-c6ce8a889add.png)   

### Crypto module
암호화를 위한 모듈   
#### Hash
```
var crypto = require('crypto');
var msg = 'abcdefg';
var hash = crypto.createHash('MD5'); // 실사용은 sha512로
hash.update(msg);
console.log(hash.digest('hex'));
```
![image](https://user-images.githubusercontent.com/87006912/224594796-cbabee79-1121-4dc7-9711-42318725b49a.png)   

### File System module
```
readFile(file, encoding, callback) 비동기적 파일 읽기
readFileSync(file, encoding) 동기적 파일 읽기
writeFile(file, encoding, callback) 비동기적 파일 쓰기
writeFileSync(file, encoding) 동기적 파일 쓰기
appendFile(file, encoding, callback) 비동기적 파일 추가
appendFileSync(file, encoding) 동기적 파일 쓰기
```
``` js
var fs = require('fs');
// 비동기적
fs.readFile('ex01.js', function(err, data) {
    console.log(data.toString('utf-8'));
});
// 동기적
var msg = fs.readFileSync('ex01.js', 'utf-8');
console.log(msg);
```
두 코드다 결과는 아래와 같음   
![image](https://user-images.githubusercontent.com/87006912/224596275-a06d2eb9-678f-400f-b9f2-d7ebc58004f8.png)   


























